(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3897ad6b"],{"5a74":function(e,o,r){},aff8:function(e,o,r){"use strict";var a=r("5a74"),t=r.n(a);t.a},b9a6:function(e,o,r){"use strict";r.r(o);var a=function(){var e=this,o=e.$createElement,r=e._self._c||o;return r("div",[r("v-row",[r("v-col",{attrs:{cols:"0",md:"4"}}),r("v-col",{attrs:{cols:"12",md:"4"}},[r("div",{staticClass:"titular text-center"},[e._v("EDITAR USUARIO")])]),r("v-col",{attrs:{cols:"0",md:"4"}})],1),e.control&&this.mensaje?r("v-row",{staticClass:"mensaje"},[r("v-col",{attrs:{cols:"0",md:"3"}}),r("v-col",{attrs:{cols:"12",md:"6"}},[e.mensaje&&!e.error?r("v-alert",{staticClass:"alerta",attrs:{type:"success",dismissible:""}},[e._v(" "+e._s(e.mensaje)+" ")]):e._e(),e.mensaje&&e.error?r("v-alert",{staticClass:"alerta",attrs:{type:"error",dismissible:""}},[e._v(" "+e._s(e.mensaje)+" ")]):e._e()],1),r("v-col",{attrs:{cols:"0",md:"3"}})],1):e._e(),r("v-row",[r("v-col",{attrs:{cols:"0",md:"2"}}),r("v-col",{attrs:{cols:"12",md:"8"}},[r("form",[r("v-row",{staticClass:"formulario"},[r("v-col",[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("span",{staticClass:"texto"},[e._v(" DATOS DE USUARIO ")]),r("div",{staticClass:"separador"})])],1),r("v-row",[r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-text-field",{attrs:{disabled:"",counter:10,rules:e.usuarioRules,label:"Usuario",color:"success",dark:"",loading:e.cargando},model:{value:e.$v.usuario.$model,callback:function(o){e.$set(e.$v.usuario,"$model",o)},expression:"$v.usuario.$model"}})],1),r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-select",{attrs:{items:e.tipoUsuarios,label:"Tipo",dark:"",color:"success",loading:e.cargando},model:{value:e.$v.tipoUsuario.$model,callback:function(o){e.$set(e.$v.tipoUsuario,"$model",o)},expression:"$v.tipoUsuario.$model"}})],1),r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-text-field",{attrs:{counter:"",rules:e.passwordRules,label:"Contraseña",color:"success",type:"password",dark:"",loading:e.cargando},model:{value:e.$v.password.$model,callback:function(o){e.$set(e.$v.password,"$model",o)},expression:"$v.password.$model"}})],1),r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-text-field",{attrs:{counter:"",rules:e.password2Rules,label:"Confirmar contraseña",color:"success",type:"password",dark:"",loading:e.cargando},model:{value:e.$v.password2.$model,callback:function(o){e.$set(e.$v.password2,"$model",o)},expression:"$v.password2.$model"}})],1)],1),r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("span",{staticClass:"texto"},[e._v(" DATOS PERSONALES ")]),r("div",{staticClass:"separador"})])],1),r("v-row",[r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-text-field",{attrs:{disabled:"",counter:"",rules:e.apellidoRules,label:"Primer apellido",color:"success",dark:"",loading:e.cargando},model:{value:e.$v.apellido.$model,callback:function(o){e.$set(e.$v.apellido,"$model",o)},expression:"$v.apellido.$model"}})],1),r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-text-field",{attrs:{disabled:"",counter:"",rules:e.apellidoRules,label:"Segundo apellido",color:"success",dark:"",loading:e.cargando},model:{value:e.$v.apellido2.$model,callback:function(o){e.$set(e.$v.apellido2,"$model",o)},expression:"$v.apellido2.$model"}})],1),r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-text-field",{attrs:{disabled:"",counter:"",rules:e.nombreRules,label:"Nombre",color:"success",dark:"",loading:e.cargando},model:{value:e.$v.nombre.$model,callback:function(o){e.$set(e.$v.nombre,"$model",o)},expression:"$v.nombre.$model"}})],1),r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-text-field",{attrs:{counter:"",type:"number",rules:e.telefonoRules,label:"Telefono",color:"success",dark:"",loading:e.cargando},model:{value:e.$v.telefono.$model,callback:function(o){e.$set(e.$v.telefono,"$model",o)},expression:"$v.telefono.$model"}})],1)],1),r("v-row",[r("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[e.$v.$invalid?e._e():r("v-btn",{staticClass:"mr-5",attrs:{color:"success",fab:"",small:"",dark:"",disabled:e.cargando},on:{click:function(o){return e.enviar()}}},[r("v-icon",[e._v("mdi-check")])],1),r("v-btn",{staticClass:"ml-5",attrs:{color:"error",fab:"",small:"",dark:""},on:{click:function(o){return e.borrarformulario()}}},[r("v-icon",[e._v("mdi-restart")])],1)],1)],1)],1)],1)],1)]),r("v-col",{attrs:{cols:"0",md:"2"}})],1)],1)},t=[],s=(r("96cf"),r("1da1")),n=r("5530"),l=r("b5ae"),i=r("6c27"),c=r("81fa"),u=r.n(c),d=r("04e1"),m=r.n(d),v=r("bc3a"),p=r.n(v),$=r("2f62"),f=r("a18c"),b={name:"EditarUsuario",data:function(){var e=this;return{control:!0,cargando:!1,usuario:"",password:"",error:!1,password2:"",tipoUsuarios:["administrador","escritor"],tipoUsuario:"",apellido:"",apellido2:"",nombre:"",telefono:"",mensaje:"",usuarioRules:[function(e){return!!e||"Usuario Requerido"},function(e){return e&&e.length<=10||"Usuario no puede tener mas de 10 caracteres"}],passwordRules:[function(e){return!!e||"Contraseña Requerida"},function(e){return e&&e.length>=8||"Contraseña no puede tener menos de 8 caracteres"}],password2Rules:[function(e){return!!e||"Confirmación de contraseña requerida"},function(o){return o===e.$v.password.$model||"Las contraseñas no coinciden"}],apellidoRules:[function(e){return!!e||"Apellido requerido"}],nombreRules:[function(e){return!!e||"Nombre requerido"}],telefonoRules:[function(e){return!!e||"Telefono requerido"},function(e){return e.length>=9||"El teléfono tiene que tener 9 números"},function(e){return e.length<=9||"El teléfono tiene que tener 9 números"}]}},validations:{usuario:{required:l["required"],maxLength:Object(l["maxLength"])(10)},password:{required:l["required"],minLength:Object(l["minLength"])(8)},password2:{required:l["required"],sameAs:Object(l["sameAs"])("password")},tipoUsuario:{required:l["required"]},apellido:{required:l["required"]},apellido2:{required:l["required"]},nombre:{required:l["required"]},telefono:{required:l["required"],minLength:Object(l["minLength"])(9),maxLength:Object(l["maxLength"])(9)}},computed:Object(n["a"])({},Object($["d"])(["HOST"])),created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function o(){var r,a,t,s,n,l,i,c,d,v,$,f;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return e.cargando=!0,r=u.a.jws.JWS,a="Alvaro1234@asdfgh",t={alg:"HS256",typ:"JWT"},s={id:localStorage.getItem("usuarioID"),usuarioID:e.$route.params.id,func:"consultarUsuario"},n=r.sign("HS256",t,s,{utf8:a}),l=new FormData,l.append("jwt",n),o.next=10,p.a.post(e.HOST+"server/api.php",l);case 10:i=o.sent,c=i.data,c.status?(d=c.token,v=r.verifyJWT(d,{utf8:a},{alg:["HS256"]}),v?($=m()(d),$.status?$.data?(f=$.data,e.$v.usuario.$model=f.usuario,e.$v.tipoUsuario.$model=f.tipo,e.$v.password.$model="",e.$v.password2.$model="",e.$v.apellido.$model=f.apellido1,e.$v.apellido2.$model=f.apellido2,e.$v.nombre.$model=f.nombre,e.$v.telefono.$model=f.telefono,e.cargando=!1):(e.cargando=!1,e.mensaje="No se han podido recuperar los datos",e.error=!0,setTimeout((function(){return e.control=!1}),4e3)):(e.mensaje="Upss... prueba otra vez",e.cargando=!1,setTimeout((function(){return e.control=!1}),4e3))):(e.mensaje="Upss... prueba otra vez",e.cargando=!1,setTimeout((function(){return e.control=!1}),4e3))):(e.error=!0,null!==c.mensaje?e.mensaje=c.mensaje:e.mensaje="Server KO... intentelo de nuevo",setTimeout((function(){return e.control=!1}),4e3),e.cargando=!1);case 13:case"end":return o.stop()}}),o)})))()},mounted:function(){this.setBack(!0),this.setRutaBack("Usuario"),this.setParamBack(this.$route.params.id),window.scroll(0,0)},destroyed:function(){this.setBack(!1),this.setRutaBack(""),this.setParamBack(""),this.mensaje=""},methods:Object(n["a"])(Object(n["a"])({},Object($["c"])(["setBack","setRutaBack","setPramBack"])),{},{borrarformulario:function(){this.$v.usuario.$model="",this.$v.tipoUsuario.$model="",this.$v.password.$model="",this.$v.password2.$model="",this.$v.apellido.$model="",this.$v.apellido2.$model="",this.$v.nombre.$model="",this.$v.telefono.$model=""},enviar:function(){this.editarUsuario()},editarUsuario:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function o(){var r,a,t,s,n,l,c,d,v,$,b;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return e.cargando=!0,r=u.a.jws.JWS,a="Alvaro1234@asdfgh",t={alg:"HS256",typ:"JWT"},s={id:localStorage.getItem("usuarioID"),usuarioID:e.$route.params.id,tipo:e.$v.tipoUsuario.$model,clave:Object(i["sha256"])(e.$v.password.$model),telefono:e.$v.telefono.$model,func:"editarUsuario"},n=r.sign("HS256",t,s,{utf8:a}),l=new FormData,l.append("jwt",n),console.log(n),o.next=11,p.a.post(e.HOST+"server/api.php",l);case 11:c=o.sent,d=c.data,d.status?(console.log("entra"),v=d.token,$=r.verifyJWT(v,{utf8:a},{alg:["HS256"]}),$?(b=m()(v),b.status?b.editado?(e.mensaje="* USUARIO EDITADO CORRECTAMENTE *",e.error=!1,e.cargando=!1,e.control=!0,setTimeout((function(){return e.control=!1}),2e3),setTimeout((function(){return e.mensaje=""}),2e3),setTimeout((function(){return f["a"].push({name:"ConsultarUsuario",params:{id:e.$route.params.id}})}),2e3)):(e.mensaje="* EL USUARIO NO HA PODIDO EDITARSE *",e.error=!0,e.cargando=!1):(e.mensaje="Upss... prueba otra vez",e.error=!0,e.cargando=!1,e.control=!0,setTimeout((function(){return e.control=!1}),2e3),setTimeout((function(){return e.mensaje=""}),2e3))):(e.mensaje="Upss... prueba otra vez",e.error=!0,e.cargando=!1,e.control=!0,setTimeout((function(){return e.control=!1}),2e3),setTimeout((function(){return e.mensaje=""}),2e3))):(e.control=!0,null!==d.mensaje?(e.error=!0,e.mensaje=d.mensaje):(e.error=!0,e.mensaje="Server KO... intentelo de nuevo"),setTimeout((function(){return e.control=!1}),2e3),setTimeout((function(){return e.mensaje=""}),2e3),e.cargando=!1);case 14:case"end":return o.stop()}}),o)})))()}})},g=b,w=(r("aff8"),r("2877")),h=r("6544"),j=r.n(h),k=r("0798"),R=r("8336"),U=r("62ad"),O=r("132d"),T=r("0fd9"),x=r("b974"),S=r("8654"),q=Object(w["a"])(g,a,t,!1,null,"52004258",null);o["default"]=q.exports;j()(q,{VAlert:k["a"],VBtn:R["a"],VCol:U["a"],VIcon:O["a"],VRow:T["a"],VSelect:x["a"],VTextField:S["a"]})}}]);
//# sourceMappingURL=chunk-3897ad6b.a00a9a83.js.map